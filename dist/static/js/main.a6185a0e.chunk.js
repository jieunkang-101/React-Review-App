(this["webpackJsonpreact-review-app"]=this["webpackJsonpreact-review-app"]||[]).push([[0],{218:function(e,t,a){e.exports=a(421)},375:function(e,t,a){},421:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(91),l=a.n(i),c=a(22),o=a(23),s=a(26),u=a(25),m=a(51),E=a.n(m),d=function(e){var t=e.notifications;return r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Notifications"),r.a.createElement("ul",{className:"online-users"},t&&t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("span",{className:"pink-text"},e.user," "),r.a.createElement("span",null,"- ",e.content),r.a.createElement("div",{className:"note-date grey-text"},E()(e.time.toDate()).fromNow()))}))))))};var h=function(e){var t=e.review;return r.a.createElement("div",{className:"card z-depth-0 review"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"card-title"},t.movieTitle),r.a.createElement("p",null,t.rating),r.a.createElement("p",{className:"grey-text"},"Posted by ",t.authorFirstName," ",t.authorLastName),r.a.createElement("p",{className:"grey-text"},E()(t.createAt.toDate()).calendar())))},p=a(5),v=function(e){var t=e.reviews;return r.a.createElement("div",{className:"review-list section"},t&&t.map((function(e){return r.a.createElement(p.b,{to:"/review/"+e.id,key:e.id},r.a.createElement(h,{review:e}))})))},g=a(6),f=a(31),b=a(16),w=Object(g.b)((function(e){return console.log("myState",e),{auth:e.firebase.auth}}))((function(e){var t=e.auth;return t.uid?r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"My Reviews"),e.reviews&&e.reviews.map((function(e){return e.authorId===t.uid?r.a.createElement(p.b,{to:"/review/"+e.id,key:e.id},r.a.createElement(h,{review:e})):null}))))):null})),N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.reviews,a=(e.auth,e.notifications);return r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement(v,{reviews:t})),r.a.createElement("div",{className:"col s12 m5 offset-m1"},r.a.createElement(d,{notifications:a}),r.a.createElement(w,{reviews:t}))))}}]),a}(n.Component),O=Object(b.d)(Object(g.b)((function(e){return{reviews:e.firestore.ordered.reviews,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications}})),Object(f.firestoreConnect)([{collection:"reviews",orderBy:["createAt","desc"]},{collection:"notifications",limit:10,orderBy:["time","desc"]}]))(N),R=a(24),_=a(32),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(_.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign Up"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Sign Up"),r.a.createElement("div",{className:"center red-text"},a?r.a.createElement("p",null,a):null))))}}]),a}(n.Component),y=Object(g.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,i=n.getFirestore,l=r(),c=i();l.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return c.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(C),S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(_.a,{to:"/"}):r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Sign In"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0"},"Login"),r.a.createElement("div",{className:"red-text center"},t?r.a.createElement("p",null,t):null))))}}]),a}(n.Component),A=Object(g.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e(function(e){return function(t,a,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(e.email,e.password).then((function(){t({type:"LOGIN_SUCCESS"})})).catch((function(e){t({type:"LOGIN_ERROR",err:e})}))}}(t))}}}))(S),j=(a(375),Object(g.b)(null,(function(e){return{signOut:function(){return e((function(e,t,a){(0,a.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(p.c,{to:"/create"},"Add New Review")),r.a.createElement("li",null,r.a.createElement("a",{href:"http://localhost:3000/",onClick:e.signOut},"Log Out")),r.a.createElement("li",null,r.a.createElement(p.c,{to:"/",className:"btn btn-floating pink lighten-1"},e.profile.initials)))}))),I=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(p.c,{to:"/signup"},"Signup")),r.a.createElement("li",null,r.a.createElement(p.c,{to:"/signin"},"Login")))},T=Object(g.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,a=e.profile,n=t.uid?r.a.createElement(j,{profile:a}):r.a.createElement(I,null);return r.a.createElement("nav",{className:"nav-wrapper grey darken-3"},r.a.createElement("div",{className:"container"},r.a.createElement(p.b,{to:"/",className:"brand-logo"},"MovieReview"),n))})),P=a(7);var F=Object(b.d)(Object(g.b)((function(e,t){var a=t.match.params.id,n=e.firestore.data.reviews;return{review:n?n[a]:null,auth:e.firebase.auth,reviewId:a,reviewActionError:e.review.reviewActionError}}),(function(e,t){var a=t.match.params.id;return{deleteReview:function(){return e(function(e){return function(t,a,n){n.getFirebase;(0,n.getFirestore)().collection("reviews").doc(e).delete().then((function(){console.log("Document successfully deleted!"),t({type:"DELETE_REVIEW"})})).catch((function(e){t({type:"DELETE_REVIEW_ERROR",err:e})}))}}(a))},selectReview:function(){return e(function(e){return function(t,a,n){n.getFirebase;(0,n.getFirestore)().collection("reviews").doc(e).get().then((function(e){e.exists?console.log("Document data:",e.data()):console.log("No such document!"),t({type:"SELECT_REVIEW"})}))}}(a))}}})),Object(f.firestoreConnect)([{collection:"reviews"}]))((function(e){var t=e.review,a=e.auth,n=e.reviewId,i=e.reviewActionError;return a.uid?t?r.a.createElement("div",{className:"container section review-detail"},r.a.createElement("div",{className:"card z-depth-o"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.movieTitle),r.a.createElement("p",null,t.rating),r.a.createElement("p",null,t.content)),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},r.a.createElement("div",null,"Posted by ",t.authorFirstName," ",t.authorLastName),r.a.createElement("div",null,E()(t.createAt.toDate()).calendar()))),r.a.createElement("button",{onClick:e.selectReview(n),className:"btn pink lighten-1 z-depth-0"},r.a.createElement(p.c,{to:"/edit"},"Updete Review")),r.a.createElement("button",{onClick:e.deleteReview,className:"btn pink lighten-1 z-depth-0"},"Delete Review"),r.a.createElement("div",{className:"red-text center"},i?r.a.createElement("p",null,i):null)):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"Loading review...")):r.a.createElement(_.a,{to:"/signin"})})),D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movieTitle:"",rating:"",content:""},e.handleChange=function(t){e.setState(Object(R.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.createReview(e.state),e.props.history.push("/")},e}return Object(o.a)(a,[{key:"render",value:function(){return this.props.auth.uid?r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Add New Review"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"movieTitle"},"Movie Title"),r.a.createElement("input",{type:"text",id:"movieTitle",onChange:this.handleChange})),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"1",onChange:this.handleChange}),r.a.createElement("span",null,"1")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"2",onChange:this.handleChange}),r.a.createElement("span",null,"2")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"3",onChange:this.handleChange}),r.a.createElement("span",null,"3")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"4",onChange:this.handleChange}),r.a.createElement("span",null,"4")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"5",onChange:this.handleChange}),r.a.createElement("span",null,"5")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"content",className:"materialize-textarea",placeholder:"What did you think of the movie?(optional)",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0 waves-effect"},"Submit",r.a.createElement("i",{className:"material-icons right"},"send"))))):r.a.createElement(_.a,{to:"/signin"})}}]),a}(n.Component),k=Object(g.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createReview:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),i=a().firebase.profile,l=a().firebase.auth.uid;r.collection("reviews").add(Object(P.a)(Object(P.a)({},e),{},{authorFirstName:i.firstName,authorLastName:i.lastName,authorId:l,createAt:new Date})).then((function(){t({type:"CREATE_REVIEW",review:e})})).catch((function(e){t({type:"CREATE_REVIEW_ERROR",err:e})}))}}(t))}}}))(D),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(R.a)({},e.target.id,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.props.updateReview(n.state),n.props.history.push("/")},n.state={rating:"",content:""},n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Update Review"),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"1",onChange:this.handleChange}),r.a.createElement("span",null,"1")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"2",onChange:this.handleChange}),r.a.createElement("span",null,"2")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"3",onChange:this.handleChange}),r.a.createElement("span",null,"3")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"4",onChange:this.handleChange}),r.a.createElement("span",null,"4")),r.a.createElement("label",null,r.a.createElement("input",{type:"radio",id:"rating",name:"rating",value:"5",onChange:this.handleChange}),r.a.createElement("span",null,"5")),r.a.createElement("div",{className:"input-field"},r.a.createElement("textarea",{id:"content",className:"materialize-textarea",placeholder:"What did you think of the movie?(optional)",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn pink lighten-1 z-depth-0 waves-effect"},"Update",r.a.createElement("i",{className:"material-icons right"},"update")))))}}]),a}(n.Component),x=Object(g.b)(null,(function(e){return{updateReview:function(t){return e((a=t,function(e,t,n){n.getFirebase;var r=(0,n.getFirestore)(),i=t().firestore.data.reviews,l=Object.keys(i)[0];r.collection("reviews").doc(l).update({rating:a.rating,content:a.content,createAt:new Date}).then((function(){console.log("Document successfully updated!"),e({type:"UPDATE_REVIEW",reviewToUpdate:a})})).catch((function(t){e({type:"UPDATE_REVIEW_ERROR",err:t})}))}));var a}}}))(U);var L=function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(T,null),r.a.createElement(_.d,null,r.a.createElement(_.b,{exact:!0,path:"/",component:O}),r.a.createElement(_.b,{path:"/review/:id",component:F}),r.a.createElement(_.b,{path:"/signin",component:A}),r.a.createElement(_.b,{path:"/signup",component:y}),r.a.createElement(_.b,{path:"/create",component:k}),r.a.createElement(_.b,{path:"/edit",component:x}),r.a.createElement(_.b,{path:"/userpage",component:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W={authError:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(P.a)(Object(P.a)({},e),{},{authError:t.err.message});case"LOGIN_SUCCESS":return console.log("Login success"),Object(P.a)(Object(P.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("Signout success"),e;case"SIGNUP_SUCCESS":return console.log("Signup success"),Object(P.a)(Object(P.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("Signup error"),Object(P.a)(Object(P.a)({},e),{},{authError:t.err.message});default:return e}},z={selectedReview:null,reviewActionError:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,a=t.id;switch(t.type){case"CREATE_REVIEW":return console.log("created review",t.review),e;case"CREATE_REVIEW_ERROR":return console.log("create review error",t.err),Object(P.a)(Object(P.a)({},e),{},{reviewActionError:t.err.message});case"SELECT_REVIEW":return Object.assign({},e,{selectedReview:a});case"UPDATE_REVIEW":return console.log("updated review",t.review),e;case"UPDATE_REVIEW_ERROR":return console.log("update review error",t.err),Object(P.a)(Object(P.a)({},e),{},{reviewActionError:t.err.message});case"DELETE_REVIEW":console.log("deleted review",t.review);case"DELETE_REVIEW_ERROR":return console.log("delete review error",t.err),Object(P.a)(Object(P.a)({},e),{},{reviewActionError:t.err.message});default:return e}},G=a(52),K=Object(b.c)({auth:B,review:V,firestore:G.firestoreReducer,firebase:f.firebaseReducer}),H=a(93),M=(a(420),a(214),{apiKey:"AIzaSyBrN1GDeidA4goczyy_H8dvPImBsq136kg",authDomain:"react-movie-review.firebaseapp.com",databaseURL:"https://react-movie-review.firebaseio.com",projectId:"react-movie-review",storageBucket:"react-movie-review.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBrN1GDeidA4goczyy_H8dvPImBsq136kg",REACT_APP_FIREBASE_AUTH_DOMAIN:"react-movie-review.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://react-movie-review.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"react-movie-review",REACT_APP_FIREBASE_STORAGE_BUCKET:"react-movie-review.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"485237639636",REACT_APP_FIREBASE_APP_ID:"1:485237639636:web:46f163171b2fd194bfee41"}).REACT_APP_FIREBASE_SENDER_ID,appId:"1:485237639636:web:46f163171b2fd194bfee41"});H.initializeApp(M),H.firestore();var X=H,J=a(217),q=Object(b.e)(K,Object(b.d)(Object(b.a)(J.a.withExtraArgument({getFirestore:G.getFirestore,getFirebase:f.getFirebase})),Object(G.reduxFirestore)(X),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Y={firebase:X,config:{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0},dispatch:q.dispatch,createFirestoreInstance:G.createFirestoreInstance};l.a.render(r.a.createElement(g.a,{store:q},r.a.createElement(f.ReactReduxFirebaseProvider,Y,r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[218,1,2]]]);
//# sourceMappingURL=main.a6185a0e.chunk.js.map